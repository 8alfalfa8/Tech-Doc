
# 汎用 基本設計書（テンプレート）
汎用（テンプレート化された）**基本設計書**をそのまま使える形で作成します。以下は、ソフトウェア／業務系システム向けの汎用的で実務的な基本設計テンプレートです。会社やプロジェクトに合わせてコピーして使えるよう、説明・記入例・チェックリストも含めています。

---

## 1. 表紙・管理情報

* ドキュメント名：基本設計書（システム名）
* バージョン：v1.0
* 作成日：YYYY/MM/DD
* 作成者：
* 承認者：
* 承認日：
* 関連資料／参照：要件定義書（ID）、運用設計書（ID）等

---

## 2. 改版履歴

| バージョン |         日付 | 作成者  | 変更点  |
| ----: | ---------: | ---- | ---- |
|  v1.0 | YYYY/MM/DD | 山田太郎 | 新規作成 |

---

## 3. 目的／範囲

* 目的：本基本設計書は、（システム名）の機能設計・非機能要件・構成・各コンポーネント仕様を定義し、実装・テスト・運用へ引き渡すための基準とする。
* 範囲：対象機能、除外事項（例：既存バッチは除外、外部連携は別プロジェクトで対応）

---

## 4. 用語定義

* 用語A：説明
* API：Application Programming Interface
  （必要な固有用語・略語を列挙）

---

## 5. 上位設計（システム概要）

* システム概要：短く1〜2段落で記述
* 利用者（ユーザ区分）：管理者、一般ユーザ、バッチ処理
* 想定利用連携：外部サービス（決済、メール、LDAP等）
* 前提条件／制約事項：ブラウザ対応、対応OS、SLA等

---

## 6. 機能設計（機能一覧と詳細）

### 6.1 機能一覧（機能カテゴリ別）

| 機能ID | 機能名   | 概要          | 優先度 |
| ---: | ----- | ----------- | --: |
| F001 | ユーザ管理 | ユーザ登録・編集・削除 |   高 |

### 6.2 機能詳細（テンプレ）

* 機能ID：F001
* 機能名：ユーザ管理
* 概要：ユーザのCRUD、役割付与、ステータス管理
* 前提条件：管理者権限が必要
* 画面：ユーザ一覧画面、ユーザ詳細、編集ダイアログ
* 入力項目／バリデーション：氏名（必須, 255文字以内）、メール（必須, format）
* 業務フロー（箇条書き）
* 非機能要件：応答3秒以内（通常負荷）
* エラーハンドリング：重複メールはエラーコード E001 を返却
* 関連API：POST /api/v1/users、GET /api/v1/users/{id}
* テスト観点：入力チェック、権限チェック、外部ID同期

---

## 7. 画面設計（画面一覧 + モック/項目）

* 画面一覧：ログイン、ダッシュボード、ユーザ一覧、ユーザ編集、レポート
* 各画面の項目一覧（テーブル形式）＋必須／型／備考
* 主要画面のワイヤー/モック（図を添付する場所）

（※モックが必要なら別添で作成します）

---

## 8. API 設計

* 共通仕様：ベースURL、認証方式（JWT/OAuth2）、共通レスポンス形式、バージョニング方針
* 例：ユーザ取得 API

```
GET /api/v1/users/{userId}
Headers:
  Authorization: Bearer <token>
Response 200:
{
  "id": "u-0001",
  "name": "山田 太郎",
  "email": "taro@example.com",
  ...
}
```

* エラーレスポンス定義（HTTPステータス、エラーコード、メッセージ）
* レート制限やページネーションの形式（例：limit/offset or cursor）

---

## 9. データ設計（概念／論理／物理）

### 9.1 ER図（概念モデル）

* 主要エンティティ：ユーザ、ロール、権限、注文、商品 等（図を別添）

### 9.2 テーブル定義例（物理）

| テーブル名 | カラム名  | 型            | PK | NULL許可   | 備考   |
| ----- | ----- | ------------ | -: | -------- | ---- |
| users | id    | bigint       |  ○ | NOT NULL | 自動採番 |
| users | email | varchar(255) |    | NOT NULL | 一意制約 |

---

## 10. 非機能要件（NFR）

* 性能：同時接続数X、レスポンスP95=3秒以下
* 可用性：SLA 99.9%
* 信頼性：障害時のRTO/RPO（例：RTO 1時間、RPO 15分）
* セキュリティ：認証方式、パスワードポリシー、脆弱性スキャン、WAF
* スケーラビリティ：オートスケール方針
* 運用監視：メトリクス（CPU、レスポンス時間、エラー率）、ログ保持期間
* 障害対応：エスカレーションフロー、連絡先

---

## 11. 非機能設計（アーキテクチャ）

* 論理構成図（クライアント、API層、アプリ層、DB、外部連携）
* 物理構成（例：AWSでの配置 — ALB → ECS/Fargate → RDS → ElastiCache）
* コンポーネント設計：各マイクロサービス/モジュールの役割
* 接続方式：同期/非同期（メッセージング：Kafka/SQS等）の採用理由

---

## 12. セキュリティ設計

* 認可/認証：OAuth2（Authorization Code）、RBACの定義
* データ保護：暗号化（転送 TLS1.2+、保存時はAES-256）
* 権限設計：ロール一覧と権限マトリクス
* ログ：監査ログに保存する項目と保持期間
* 脆弱性対策：CSRF、XSS、SQLインジェクション対策方針

---

## 13. 運用設計・リリース設計

* デプロイ方式：Blue-Green / Canary
* バックアップ：DBバックアップ頻度、保管場所、保持期間
* バッチ運用：バッチスケジュール、再実行フロー、監視
* 障害時手順：ロールバック手順、緊急対応チェックリスト
* モニタリング：ツール（例：Prometheus+Grafana、CloudWatch）、ダッシュボード案

---

## 14. テスト計画（基本方針）

* 単体テスト：網羅率、テスト項目の例
* 結合テスト：外部APIとの結合確認
* システムテスト：業務フローの網羅、パフォーマンステスト（負荷条件）
* 受入テスト：受入基準、UATスケジュール
* 自動化：CI/CDに組み込むテスト（unit/integration/e2e）

---

## 15. 移行設計（ある場合）

* 既存データの変換ルール、移行手順、切替手順、リハーサル計画

---

## 16. 設計の留意点・課題

* 現時点でのリスクと対応案（例：外部APIの仕様未確定 → フェーズ分けで対応）
* 将来拡張性に関する備考

---

## 17. 付録・成果物一覧

* 付録：エラコード一覧、API一覧（エンドポイント一覧）、DB DDL（別添）
* 成果物：画面モック、ER図、API仕様書（OpenAPI）、運用手順書

---

## 18. 承認

* 承認者署名欄（プロジェクト責任者、業務責任者、品質責任者）

---

# 使い方メモ（カスタマイズのヒント）

1. 要件定義を参照して、機能一覧（6章）をまず埋める。優先度設定は必須。
2. 画面モックは Figma / Sketch / Excel ワイヤーで作成して別添。
3. API は OpenAPI 3.0 形式で別ファイル化して CI に組み込むと便利。
4. 非機能要件は SLA と合わせて数値化（レスポンスタイム、同時接続、スループットなど）。
5. セキュリティは設計段階で必ず脅威分析（STRIDE 等）を行う。

---

# すぐ使えるチェックリスト（設計レビュー用）

* [ ] 要件定義との齟齬はないか
* [ ] 主要画面の必須項目は定義済みか
* [ ] API の認証/認可は明確か
* [ ] ER図とテーブル定義に矛盾はないか
* [ ] 非機能要件は数値化されているか
* [ ] バックアップ・監視・ログ方針があるか
* [ ] セキュリティ対策が盛り込まれているか
* [ ] テスト観点と受入基準があるか

---

